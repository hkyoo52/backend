## 프로필 유저 정보 넣기
```python
# models.py
class User(AbstractUser):
    ~~~
    profile_pic = models.ImageField(default='default_profile_pic.jpg', upload_to='porfile_pics')  # 유저 사진
    
    intro = models.CharField(max_length=50, blank=True)   # 유저 정보
```
* 위처럼 코드를 짜면 꼭!!! media에 default_profile_pic.jpg가 있고 porfile_pics라는 파일이 있어야 해!!
* 그후 migrate 진행
* 그리고 나서 admin에 profile_pic과 intro 추가!!
```
# admin.py
UserAdmin.fieldsets += (("Custom fields", {'fields' : ('nickname', 'profile_pic','intro')}),) # userfield에 관한거는 admin에 반영 X -> admin에 따로 써줘야함
```

## 프로필 url 만들기
```python
# urls.py
path('users/<int:user_id>/',views.ProfileView.as_view(),name='profile'),

# views.py
class ProfileView(DetailView):
    model = User
    template_name = 'coplate/profile.html'
    pk_url_kwarg = 'user_id'
    context_object_name = 'profile_user' # 이거 사용 안하면 그냥 user 받아옴, user_id에 해당하는 user는 profile_user라는 이름으로 전달

    # 데이터를 context에 넣어서 전달하기!!,
    def get_context_data(self,**kwargs):
        context = super().get_context_data(**kwargs) # 유저가 가지고 있는 데이터 가져오기
        user_id = self.kwargs.get('user_id')
        context['user_reviews'] = Review.objects.filter(author_id=user__id).order_by('dt_created')[:4]
        return context
```

## 내가 만든 리뷰만 보게 하기
```python
# urls.py
path('users/<int:user_id>/reviews/',views.UserReviewListView.as_view(),name='user-review-list'),

# views.py
class UserReviewListView(ListView):
    model = Review
    template_name = 'coplate/user_review_list.html'
    context_object_name = 'user_reviews'
    paginate_by = 4

    # 특정 유저가 만든 리뷰만 전달!!
    def get_queryset(self):
        user_id = self.kwargs.get('user_id')
        return Review.objects.filter(author__id=user_id).order_by('dt_created')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['profile_user'] = get_object_or_404(User, id=self.kwargs.get('user_id'))
        return context
```

## 회원 가입 후 프로필 설정 페이지로 가기
```python
# urls.py
path('set-profile/', views.ProfileSetView.as_view(), name='profile-set')

# setting.py
ACCOUNT_SIGNUP_REDIRECT_URL = "profile-set"  # 회원 가입 후 들어갈 페이지

# views.py
class ProfileSetView(LoginRequiredMixin, UpdateView):   # 유저 말고는 못들어오게 하기 위해서 LoginRequiredMixin 넣기!!
    model =User
    form_class = ProfileForm
    template_name = 'coplate/profile_set_form.html'

    # 업데이트 해야 할 object 알려줘야 하므로
    def get_object(self, queryset=None):
        return self.request.user

    # 위에 것이 잘 되면 이 메소드 실행
    def get_success_url(self):
        return reverse('index')

class ProfileForm(forms.ModelForm):
    class Meta:
        model = User
        fields = ['nickname','profile_pic','intro']
        # intro는 긴 글 형식으로
        widgets = {'intro' : forms.Textarea,}
```






