## 폼
* 사용자의 데이터를 입력받을 수 있는 입력 양식
* request : 클라이언트가 서버에 데이터 보냄
    * GET : 데이터를 url에 담아서 점송(Query String 형태) Ex. 동영상 시청,,
        * Query String은 URL 끝을 ?로 표시, =로 key와 value 쌍 나타냄, 데이터는 &로 구분
    * POST : 데이터를 메세지 안쪽에 넣어서 전송 Ex. 비밀번호
* responce : 서버가 클라이언트에 데이터 보냄

#### 폼 처리 과정
* GET 방식으로 요청
* Form 제공
* 데이터 입력
* POST 방식으로 요청
* 데이터 유효성 검증


## 폼 사용법 (+ db에 저장)
* forms.py 생성
```python
from django import forms

class PostForm(forms.Form):
    title = forms.CharField(max_length=50, label = '제목')
    content = forms.CharField(label='내용', widget=forms.Textarea)
```
* urls.py에 웹페이지 연결
```python
urlpatterns=[
path('posts/new',views.post_create, name = 'post-create'),
]
```
* views.py
```python
from django.shortcuts import render, redirect
from .forms import PostForm
def post_create(request):
    if request.method == 'POST': # Post 방식이면
        title = request.POST['title']  
        content = request.POST['content']
        new_post = Post(
            title = title,
            content = content,
        )                         # title, content를 저장해서
        new_post.save()           # DB에 저장해라
        return redirect('post-detail', post_id=new_post.id)  # post-detail 웹사이트로 들어가라
    else:  # GET 방식이면 그냥 홈페이지 들어가기
        post_form = PostForm()
        return render(request, 'posts/post_form.html', {'form': post_form})
```

## CSRF  -> 보안!!
* 유저가 정상유저인지를 인증해야됨
* 유저가 폼에 데이터를 입력하고 서버로 전송할 때 이 토큰 값을 함께 전달해서 서버에서 토큰 값을 비교한 뒤 요청을 처리하는 방식



## Model Form 
* 더 간단하게 form 형성
```python
# forms.py
from .models import Post

class PostForm(forms.ModelForm):
    
    class Meta:
        model = Post
        fields = ['title','content']  # 모든 field 사용하고 싶으면 fields = '__all__'


# views.py
from .forms import PostForm

def post_create(request):
    if request.method == 'POST':
        post_form = PostForm(request.POST)  # POST 형식으로 된것을 받아라
        new_post = post_form.save()         # DB에 저장해라
        return redirect('post-detail', post_id=new_post.id)
    else:
        post_form = PostForm()
        return render(request, 'posts/post_form.html', {'form': post_form})
```

